<!DOCTYPE html>
<html class="dark" lang="en">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>GameBox User Profile</title>
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <link href="https://fonts.googleapis.com/css2?family=Spline+Sans:wght@400;500;700&amp;display=swap"
    rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
  <link rel="icon" type="image/jpeg"
    href="https://imgs.search.brave.com/vcOicL6yCVdeBpDPth1MSwcFzMrlqx3RyoZ_FnlqtZs/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9pbWcu/ZnJlZXBpay5jb20v/cHJlbWl1bS12ZWN0/b3IvcGxheXN0YXRp/b24tc3RpY2stY29u/dHJvbGxlci1jYXJ0/b29uLWlsbHVzdHJh/dGlvbi1wcmVtaXVt/LXZlY3Rvcl8yNjI5/NjItMTU0LmpwZz9z/ZW10PWFpc19oeWJy/aWQmdz03NDA">
  <link rel="apple-touch-icon"
    href="https://imgs.search.brave.com/vlz7U7Y0riMxxyxz0KW_KzAyiVhNFtwbM4LXlLlQkXE/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9pLnBp/bmltZy5jb20vb3Jp/Z2luYWxzLzE2L2Nh/L2NmLzE2Y2FjZjJk/MjBlYjY0ODVlNzAx/ODVjZTZhZjIxMzRj/LmpwZw">

  <script>
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            "primary": "#4c69e6",
            "background-light": "#c3f9ff",
            "background-dark": "#111421",
            "text-light": "#1f2937",
            "text-dark": "#f9fafb",
            "primary-dark": "#6b8cff",
          },
          fontFamily: {
            "display": ["Spline Sans", "Noto Sans", "sans-serif"]
          },
          borderRadius: {
            "DEFAULT": "0.5rem",
            "lg": "1rem",
            "xl": "1.5rem",
            "full": "9999px"
          },
        },
      },
    }
  </script>
  <style>
    :root {
      --bg-primary: #111421;
      --bg-secondary: rgba(255, 255, 255, 0.1);
      --text-primary: #f9fafb;
      --text-secondary: #94a3b8;
    }

    body {
      background: linear-gradient(300deg, #111421, #1a1e38, #3c2a4d);
      font-family: 'Spline Sans', sans-serif;
      transition: background-color 0.5s ease;
      color: var(--text-primary);
    }

    body.light {
      --bg-primary: #c3f9ff;
      --bg-secondary: rgba(0, 0, 0, 0.05);
      --text-primary: #1f2937;
      --text-secondary: #64748b;
      background: linear-gradient(300deg, #c3f9ff, #a8d8ea, #8ac6d1);
    }

    /* Find Friends search input dark theme fixes */
    body.dark .form-input.bg-white-20 {
      background-color: rgba(255, 255, 255, 0.1) !important;
      color: #e5e7eb !important;
    }

    body.dark .form-input.bg-white-20::placeholder {
      color: #94a3b8 !important;
    }

    body.dark .text-gray-400.flex.border-none.bg-white-20 {
      background-color: rgba(255, 255, 255, 0.1) !important;
      color: #94a3b8 !important;
    }

    /* Light mode üçün də eyni düzəlişlər */
    body.light .form-input.bg-white-20 {
      background-color: rgba(255, 255, 255, 0.8) !important;
      color: #1f2937 !important;
    }

    body.light .form-input.bg-white-20::placeholder {
      color: #64748b !important;
    }

    body.light .text-gray-400.flex.border-none.bg-white-20 {
      background-color: rgba(255, 255, 255, 0.8) !important;
      color: #64748b !important;
    }

    .material-symbols-outlined {
      font-variation-settings:
        'FILL' 0,
        'wght' 400,
        'GRAD' 0,
        'opsz' 24
    }

    /* General component styles */
    .bg-white-10 {
      background-color: rgba(255, 255, 255, 0.1);
    }

    .bg-white-5 {
      background-color: rgba(255, 255, 255, 0.05);
    }

    .bg-white-20 {
      background-color: rgba(255, 255, 255, 0.2);
    }

    .hover-bg-white-10:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }

    .hover-bg-white-30:hover {
      background-color: rgba(255, 255, 255, 0.3);
    }

    .border-white-10 {
      border-color: rgba(255, 255, 255, 0.1);
    }

    .text-e5e7eb {
      color: #e5e7eb;
    }

    /* Light mode overrides */
    body.light .bg-white-10 {
      background-color: rgba(255, 255, 255, 0.7);
    }

    body.light .bg-white-5 {
      background-color: rgba(255, 255, 255, 0.6);
    }

    body.light .bg-white-20 {
      background-color: rgba(255, 255, 255, 0.8);
    }

    body.light .hover-bg-white-10:hover {
      background-color: rgba(255, 255, 255, 0.8);
    }

    body.light .hover-bg-white-30:hover {
      background-color: rgba(255, 255, 255, 0.9);
    }

    body.light .border-white-10 {
      border-color: rgba(0, 0, 0, 0.1);
    }

    body.light .text-e5e7eb {
      color: #1f2937;
    }

    body.light .text-gray-300 {
      color: #6b7280;
    }

    body.light .text-gray-400 {
      color: #9ca3af;
    }

    body.light .text-white {
      color: #1f2937;
    }

    /* Header styles */
    .glass-header {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
      transition: all 0.5s ease;
    }

    body.light .glass-header {
      background: rgba(255, 255, 255, 0.7);
      border: 1px solid rgba(0, 0, 0, 0.1);
    }

    /* Dropdown styles */
    .dropdown-menu {
      opacity: 0;
      transform: translateY(-10px);
      transition: opacity 0.3s, transform 0.3s;
      pointer-events: none;
    }

    .dropdown-menu.show {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }

    /* Notification dropdown */
    .notification-dropdown {
      position: absolute;
      top: 100%;
      right: 0;
      margin-top: 0.5rem;
      width: 320px;
      background: rgba(30, 41, 59, 0.95);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      border-radius: 12px;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.3s ease;
    }

    body.light .notification-dropdown {
      background: rgba(255, 255, 255, 0.95);
      border: 1px solid rgba(0, 0, 0, 0.1);
    }

    .notification-dropdown.active {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .notification-header {
      padding: 1rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    body.light .notification-header {
      border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    }

    .notification-content {
      max-height: 300px;
      overflow-y: auto;
    }

    .notification-empty {
      padding: 2rem 1rem;
      text-align: center;
      color: #94a3b8;
    }

    body.light .notification-empty {
      color: #64748b;
    }

    .notification-item {
      padding: 1rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      transition: background-color 0.2s ease;
    }

    body.light .notification-item {
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    }

    .notification-item:hover {
      background-color: rgba(255, 255, 255, 0.05);
    }

    body.light .notification-item:hover {
      background-color: rgba(0, 0, 0, 0.05);
    }

    .notification-title {
      font-weight: 600;
      margin-bottom: 0.25rem;
      color: #e2e8f0;
    }

    body.light .notification-title {
      color: #1e293b;
    }

    .notification-message {
      font-size: 0.875rem;
      color: #94a3b8;
    }

    body.light .notification-message {
      color: #64748b;
    }

    .notification-time {
      font-size: 0.75rem;
      color: #64748b;
      margin-top: 0.25rem;
    }

    body.light .notification-time {
      color: #94a3b8;
    }

    .notification-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background-color: #ef4444;
      color: white;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      font-size: 0.7rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .notification-actions {
      padding: 0.75rem;
      display: flex;
      justify-content: center;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    body.light .notification-actions {
      border-top: 1px solid rgba(0, 0, 0, 0.1);
    }

    .relative-container {
      position: relative;
    }

    /* Profile Dropdown Styles */
    .profile-dropdown {
      position: absolute;
      top: 100%;
      right: 0;
      margin-top: 0.5rem;
      width: 280px;
      background: rgba(30, 41, 59, 0.95);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      border-radius: 12px;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.3s ease;
    }

    body.light .profile-dropdown {
      background: rgba(255, 255, 255, 0.95);
      border: 1px solid rgba(0, 0, 0, 0.1);
    }

    .profile-dropdown.active {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .profile-header {
      padding: 1.25rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    body.light .profile-header {
      border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    }

    .profile-avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 1.25rem;
    }

    .profile-info {
      flex: 1;
      min-width: 0;
    }

    .profile-name {
      font-weight: 600;
      color: #f9fafb;
      font-size: 1rem;
      margin-bottom: 0.25rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    body.light .profile-name {
      color: #1f2937;
    }

    .profile-username {
      color: #94a3b8;
      font-size: 0.875rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    body.light .profile-username {
      color: #64748b;
    }

    .profile-dropdown-item {
      padding: 0.75rem 1rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      color: #e2e8f0;
      transition: background-color 0.2s ease;
      cursor: pointer;
      text-decoration: none;
    }

    body.light .profile-dropdown-item {
      color: #1e293b;
    }

    .profile-dropdown-item:hover {
      background-color: rgba(255, 255, 255, 0.05);
    }

    body.light .profile-dropdown-item:hover {
      background-color: rgba(0, 0, 0, 0.05);
    }

    .profile-dropdown-divider {
      height: 1px;
      background-color: rgba(255, 255, 255, 0.1);
      margin: 0.25rem 0;
    }

    body.light .profile-dropdown-divider {
      background-color: rgba(0, 0, 0, 0.1);
    }

    .profile-dropdown-item.logout {
      color: #ef4444;
    }

    body.light .profile-dropdown-item.logout {
      color: #dc2626;
    }

    .profile-dropdown-item.logout:hover {
      background-color: rgba(239, 68, 68, 0.1);
    }

    body.light .profile-dropdown-item.logout:hover {
      background-color: rgba(220, 38, 38, 0.1);
    }

    /* Save button styles */
    .save-button {
      background-color: #6b7280;
      color: #d1d5db;
      cursor: not-allowed;
      transition: all 0.3s ease;
    }

    .save-button.active {
      background-color: #10b981;
      color: white;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
    }

    .save-button.active:hover {
      background-color: #059669;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
    }

    .save-button.changed {
      animation: pulse-green 0.5s ease;
    }

    @keyframes pulse-green {
      0% {
        box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);
      }

      70% {
        box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);
      }

      100% {
        box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);
      }
    }

    /* Toggle switch animation */
    .toggle-switch {
      position: relative;
      display: inline-flex;
      align-items: center;
      height: 2rem;
      width: 3.5rem;
      background-color: #b6f4ff;
      border-radius: 9999px;
      transition: background-color 0.3s;
      cursor: pointer;
    }

    .dark .toggle-switch {
      background-color: #b2bcca;
    }

    .toggle-switch.active {
      background-color: #4c69e6;
    }

    .toggle-knob {
      position: absolute;
      left: 0.25rem;
      height: 1.5rem;
      width: 1.5rem;
      background-color: white;
      border-radius: 50%;
      transition: transform 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .toggle-switch.active .toggle-knob {
      transform: translateX(1.5rem);
    }

    .toggle-icon {
      font-size: 1rem;
      transition: opacity 0.3s;
      position: relative;
      left: -7px;
    }

    .light-icon {
      color: #f59e0b;
      position: relative;
      left: 8px;
    }

    .dark-icon {
      color: #9ca3af;
    }

    .toggle-switch.active .light-icon {
      opacity: 0;
    }

    .toggle-switch:not(.active) .dark-icon {
      opacity: 0;
    }

    /* Success message animation */
    .success-message {
      animation: fadeInOut 3s ease forwards;
    }

    @keyframes fadeInOut {
      0% {
        opacity: 0;
        transform: translateY(-10px);
      }

      20% {
        opacity: 1;
        transform: translateY(0);
      }

      80% {
        opacity: 1;
        transform: translateY(0);
      }

      100% {
        opacity: 0;
        transform: translateY(-10px);
      }
    }

    /* Footer hover effects */
    .footer a {
      transition: all 0.3s ease;
    }

    .footer a:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    /* LinkedIn hover için özel stil */
    .footer a[href*="linkedin"]:hover {
      background-color: #0a66c2 !important;
      box-shadow: 0 4px 12px rgba(10, 102, 194, 0.3);
    }

    /* GitHub hover için özel stil */
    .footer a[href*="github"]:hover {
      background-color: #333 !important;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    /* Dark mode için hover efektleri */
    .dark .footer a:hover {
      box-shadow: 0 4px 12px rgba(255, 255, 255, 0.1);
    }

    .dark .footer a[href*="linkedin"]:hover {
      box-shadow: 0 4px 12px rgba(10, 102, 194, 0.5);
    }

    .dark .footer a[href*="github"]:hover {
      box-shadow: 0 4px 12px rgba(255, 255, 255, 0.2);
    }

    /* Profil düzenleme butonları için stiller */
    .username-container,
    .name-container {
      position: relative;
      display: inline-flex;
      align-items: center;
      width: fit-content;
    }

    .username-container .edit-btn,
    .name-container .edit-btn {
      position: absolute;
      left: 100%;
      top: 50%;
      transform: translateY(-50%);
      margin-left: 8px;
      opacity: 0;
      transition: opacity 0.2s ease;
    }

    .username-container:hover .edit-btn,
    .name-container:hover .edit-btn {
      opacity: 1;
    }

    /* Status container styling */
    .status-container {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      cursor: pointer;
      padding: 0.25rem 0.5rem;
      border-radius: 0.5rem;
      transition: background-color 0.2s ease;
      position: relative;
    }

    .status-container:hover {
      background-color: rgba(255, 255, 255, 0.05);
    }

    body.light .status-container:hover {
      background-color: rgba(0, 0, 0, 0.05);
    }

    /* Status dropdown styles */
    .status-dropdown {
      position: absolute;
      top: 100%;
      left: 0;
      margin-top: 0.5rem;
      width: 200px;
      background: rgba(17, 24, 39, 0.95);
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
      border-radius: 12px;
      z-index: 1001;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.3s ease;
    }

    body.light .status-dropdown {
      background: rgba(255, 255, 255, 0.9);
      border: 1px solid rgba(0, 0, 0, 0.08);
    }

    .status-dropdown.active {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .status-option {
      padding: 0.75rem 1rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      color: #e2e8f0;
      transition: background-color 0.2s ease;
      cursor: pointer;
    }

    body.light .status-option {
      color: #1e293b;
    }

    .status-option:hover {
      background-color: rgba(255, 255, 255, 0.05);
    }

    body.light .status-option:hover {
      background-color: rgba(0, 0, 0, 0.05);
    }

    /* Modal styles for dark theme */
    .dark-modal {
      background: rgba(30, 41, 59, 0.95);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: #f9fafb;
    }

    .dark-modal h3,
    .dark-modal h4 {
      color: #f9fafb;
    }

    .dark-modal .text-gray-800 {
      color: #f9fafb;
    }

    .dark-modal .text-gray-700 {
      color: #e5e7eb;
    }

    .dark-modal .text-gray-600 {
      color: #d1d5db;
    }

    .dark-modal .text-gray-500 {
      color: #9ca3af;
    }

    .dark-modal .text-gray-400 {
      color: #6b7280;
    }

    .dark-modal .border-gray-200,
    .dark-modal .border-gray-300 {
      border-color: rgba(255, 255, 255, 0.1);
    }

    /* Clickable fields */
    .clickable-field {
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .clickable-field:hover {
      background-color: rgba(255, 255, 255, 0.05);
    }

    body.light .clickable-field:hover {
      background-color: rgba(0, 0, 0, 0.05);
    }

    /* Bio placeholder styling */
    .bio-textarea::placeholder {
      color: #94a3b8;
      font-style: italic;
    }

    body.light .bio-textarea::placeholder {
      color: #64748b;
    }

    /* Custom dropdown styles */
    .custom-dropdown {
      position: absolute;
      top: 100%;
      left: 0;
      margin-top: 0.5rem;
      width: 100%;
      max-height: 300px;
      overflow-y: auto;
      background: rgba(17, 24, 39, 0.95);
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
      border-radius: 12px;
      z-index: 1001;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.3s ease;
    }

    body.light .custom-dropdown {
      background: rgba(255, 255, 255, 1);
      border: 1px solid rgba(0, 0, 0, 0.08);
    }

    .custom-dropdown.active {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .custom-dropdown-option {
      padding: 0.75rem 1rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      color: #e2e8f0;
      transition: background-color 0.2s ease;
      cursor: pointer;
    }

    body.light .custom-dropdown-option {
      color: #1e293b;
    }

    .custom-dropdown-option:hover {
      background-color: rgba(255, 255, 255, 0.05);
    }

    body.light .custom-dropdown-option:hover {
      background-color: rgba(0, 0, 0, 0.05);
    }

    /* Date picker styles */
    .datepicker-container {
      position: relative;
    }

    .datepicker {
      position: absolute;
      top: 100%;
      z-index: 100;
      margin-top: 2px;
      background: rgba(17, 24, 39, 1);
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
      border-radius: 12px;
      padding: 10px;
      width: 320px;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.3s ease;
    }

    body.light .datepicker {
      background: rgba(255, 255, 255, 0.95);
      border: 1px solid rgba(0, 0, 0, 0.08);
    }

    /* LIGHT MODE SCROLLBAR */
    body.light #country-list::-webkit-scrollbar-track {
      background: rgba(0, 0, 0, 0.08);
    }

    body.light #country-list::-webkit-scrollbar-thumb {
      background: rgba(0, 0, 0, 0.3);
    }

    body.light #country-list::-webkit-scrollbar-thumb:hover {
      background: rgba(0, 0, 0, 0.5);
    }

    /* DARK MODE SCROLLBAR - ƏSAS */
    #country-list::-webkit-scrollbar {
      width: 6px;
    }

    #country-list::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 3px;
    }

    #country-list::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.2);
      border-radius: 3px;
    }

    #country-list::-webkit-scrollbar-thumb:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    .datepicker.active {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .datepicker button {
      cursor: pointer;
      border: none;
      border-radius: 3px;
      background: transparent;
      font-size: 14px;
      font-weight: 500;
      text-transform: uppercase;
      touch-action: manipulation;
      color: #e5e7eb;
    }

    body.light .datepicker button {
      color: #1f2937;
    }

    .days,
    .dates {
      display: grid;
      grid-template-columns: repeat(7, 32px);
      gap: 10px;
      margin-block: 10px;
    }

    .days span {
      font-size: 14px;
      font-weight: 600;
      text-transform: uppercase;
      text-align: center;
      color: #94a3b8;
    }

    body.light .days span {
      color: #64748b;
    }

    .dates button {
      color: #94a3b8;
      aspect-ratio: 1;
    }

    body.light .dates button {
      color: #64748b;
    }

    .dates button:disabled {
      opacity: 0.5;
      pointer-events: none;
      user-select: none;
    }

    .dates button:hover {
      background: rgba(255, 255, 255, 0.05);
    }

    body.light .dates button:hover {
      background: rgba(0, 0, 0, 0.05);
    }

    .dates button.today {
      background: rgba(76, 105, 230, 0.2);
      color: #4c69e6;
    }

    .dates button.selected {
      background: #4c69e6;
      color: #fff;
    }

    .datepicker-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding-bottom: 10px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    body.light .datepicker-header {
      border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    }

    .datepicker-header select option {
      background-color: #1e293b;
      color: #f1f5f9;
    }

    body.light .datepicker-header select option {
      background-color: #ffffff;
      color: #1e293b;
    }

    .datepicker-header select,
    .datepicker-header input {
      font-size: 14px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      outline-color: #4c69e6;
      background: rgba(255, 255, 255, 0.05);
      color: #e5e7eb;
      border-radius: 5px;
      padding: 5px;
    }

    body.light .datepicker-header select,
    body.light .datepicker-header input {
      border: 1px solid rgba(0, 0, 0, 0.1);
      background: rgba(0, 0, 0, 0.05);
      color: #1f2937;
    }

    .datepicker-header input {
      max-width: 64px;
    }

    .datepicker-header button {
      color: #94a3b8;
    }

    body.light .datepicker-header button {
      color: #64748b;
    }

    .datepicker-header button:hover {
      color: #4c69e6;
    }

    .datepicker-footer {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      padding-top: 10px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    body.light .datepicker-footer {
      border-top: 1px solid rgba(0, 0, 0, 0.1);
    }

    .datepicker-footer button {
      background: rgba(255, 255, 255, 0.05);
      padding: 3px 10px;
    }

    body.light .datepicker-footer button {
      background: rgba(0, 0, 0, 0.05);
    }

    .datepicker-footer button.apply {
      background: #4c69e6;
      color: #fff;
    }

    /* Country flag styles */
    .country-flag {
      width: 24px;
      height: 16px;
      object-fit: cover;
      border-radius: 2px;
    }

    /* Bio text selection mode */
    .bio-textarea.selection-mode {
      cursor: text;
      user-select: text;
    }

    section.bg-white-10.backdrop-blur-md.rounded-xl.p-6:first-of-type {
      position: relative;
      z-index: 2;
    }

    section.bg-white-10.backdrop-blur-md.rounded-xl.p-6:last-of-type {
      position: relative;
      z-index: 1;
    }

    .flex.items-center.p-3.bg-white-5.rounded-lg {
      position: relative;
      z-index: 1;
    }

    .relative-container {
      z-index: auto;
    }

    .status-dropdown,
    .datepicker,
    .custom-dropdown {
      z-index: 9999 !important;
    }

    #status-dropdown,
    #datepicker,
    #gender-dropdown,
    #country-dropdown {
      z-index: 9999 !important;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    /* Gender and country display alignment */
    .gender-display,
    .country-display {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    /* Find Friends search input dark theme fixes */
    body.light .form-input.bg-white-20 {
      background-color: rgba(255, 255, 255, 0.8) !important;
      color: #1f2937 !important;
    }

    body.light .form-input.bg-white-20::placeholder {
      color: #64748b !important;
    }

    body.light .text-gray-400.flex.border-none.bg-white-20 {
      background-color: rgba(255, 255, 255, 0.8) !important;
      color: #64748b !important;
    }

    /* Add Friends Modal Light Theme Styles */
    body.light .dark-modal {
      background: rgba(255, 255, 255, 0.95) !important;
      border: 1px solid rgba(0, 0, 0, 0.1) !important;
      color: #1f2937 !important;
    }

    body.light .dark-modal h3,
    body.light .dark-modal h4 {
      color: #1f2937 !important;
    }

    body.light .dark-modal .text-gray-300 {
      color: #4b5563 !important;
    }

    body.light .dark-modal input.form-input {
      background-color: rgba(255, 255, 255, 0.9) !important;
      border: 1px solid rgba(0, 0, 0, 0.2) !important;
      color: #1f2937 !important;
    }

    body.light .dark-modal input.form-input::placeholder {
      color: #9ca3af !important;
    }

    body.light .dark-modal input.form-input:focus {
      outline: 2px solid #4c69e6 !important;
      outline-offset: 2px !important;
    }

    body.light .dark-modal button#search-friend-btn {
      background-color: #4c69e6 !important;
      color: white !important;
    }

    body.light .dark-modal button#search-friend-btn:hover {
      background-color: #3a56d4 !important;
    }

    body.light .dark-modal #close-add-friend-modal {
      color: #6b7280 !important;
    }

    body.light .dark-modal #close-add-friend-modal:hover {
      color: #374151 !important;
    }

    body.light .dark-modal #no-results .text-gray-400 {
      color: #6b7280 !important;
    }

    body.light .dark-modal #no-results .text-gray-500 {
      color: #9ca3af !important;
    }

    body.light .dark-modal .material-symbols-outlined {
      color: #6b7280 !important;
    }

    /* Light Theme Friend Hover Button Styles */
    body.light .flex.items-center.p-3.bg-white-5.rounded-lg.hover\:bg-white-10.group:hover .opacity-0 {
      opacity: 1 !important;
    }

    body.light .group:hover .p-2.rounded-full.bg-white-20 {
      background-color: rgba(0, 0, 0, 0.1) !important;
    }

    body.light .group:hover .p-2.rounded-full.bg-white-20:hover {
      transform: scale(1.1);
      transition: all 0.2s ease;
    }

    /* Chat button hover */
    body.light .group:hover .p-2.rounded-full.bg-white-20:hover:first-child {
      background-color: #4c69e6 !important;
      color: white !important;
    }

    /* Friend profile button hover */
    body.light .group:hover .p-2.rounded-full.bg-white-20:hover:nth-child(2) {
      background-color: #10b981 !important;
      color: white !important;
    }

    /* Remove friend button hover */
    body.light .group:hover .p-2.rounded-full.bg-white-20:hover:last-child {
      background-color: #ef4444 !important;
      color: white !important;
    }

    /* Material icon colors in light theme */
    body.light .group:hover .p-2.rounded-full.bg-white-20 .material-symbols-outlined {
      color: #4b5563 !important;
    }

    body.light .group:hover .p-2.rounded-full.bg-white-20:hover .material-symbols-outlined {
      color: white !important;
    }

    /* Button shadow effects */
    body.light .group:hover .p-2.rounded-full.bg-white-20:hover {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    /* Dark Theme Friend Hover Button Styles */
    body.dark .flex.items-center.p-3.bg-white-5.rounded-lg.hover\:bg-white-10.group:hover .opacity-0 {
      opacity: 1 !important;
    }

    body.dark .group:hover .p-2.rounded-full.bg-white-20 {
      background-color: rgba(255, 255, 255, 0.2) !important;
    }

    body.dark .group:hover .p-2.rounded-full.bg-white-20:hover {
      transform: scale(1.1);
      transition: all 0.2s ease;
    }

    /* Chat button hover */
    body.dark .group:hover .p-2.rounded-full.bg-white-20:hover:first-child {
      background-color: #4c69e6 !important;
      color: white !important;
    }

    /* Friend profile button hover */
    body.dark .group:hover .p-2.rounded-full.bg-white-20:hover:nth-child(2) {
      background-color: #10b981 !important;
      color: white !important;
    }

    /* Remove friend button hover */
    body.dark .group:hover .p-2.rounded-full.bg-white-20:hover:last-child {
      background-color: #ef4444 !important;
      color: white !important;
    }

    /* Material icon colors in dark theme */
    body.dark .group:hover .p-2.rounded-full.bg-white-20 .material-symbols-outlined {
      color: #e5e7eb !important;
    }

    body.dark .group:hover .p-2.rounded-full.bg-white-20:hover .material-symbols-outlined {
      color: white !important;
    }

    /* Button shadow effects */
    body.dark .group:hover .p-2.rounded-full.bg-white-20:hover {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    /* Dark theme specific enhancements */
    body.dark .group:hover .p-2.rounded-full.bg-white-20 {
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    body.dark .group:hover .p-2.rounded-full.bg-white-20:hover {
      border-color: transparent;
    }
  </style>
</head>

<body class="font-display dark">
  <div class="relative flex h-auto min-h-screen w-full flex-col bg-transparent group/design-root overflow-x-hidden">
    <div class="layout-container flex h-full grow flex-col">
      <div class="px-4 md:px-10 lg:px-40 flex flex-1 justify-center py-5">
        <div class="layout-content-container flex flex-col max-w-[960px] flex-1">
          <!-- HEADER -->
          <header
            class="sticky top-0 z-50 flex items-center justify-between whitespace-nowrap border-b border-solid border-white-10 px-6 sm:px-10 md:px-20 py-3 glass-header rounded-xl">
            <div class="flex items-center gap-4 text-white">
              <div class="size-8 text-primary">
                <span class="material-symbols-outlined !text-4xl">stadia_controller</span>
              </div>
              <h2 class="text-white text-xl font-bold leading-tight tracking-[-0.015em]">GameBox</h2>
            </div>
            <div class="hidden md:flex items-center gap-9">
              <a class="text-gray-300 hover:text-white text-sm font-medium leading-normal"
                href="dashboard.html">Home</a>
              <a class="text-gray-300 hover:text-white text-sm font-medium leading-normal" href="#">Achievements</a>
              <a class="text-gray-300 hover:text-white text-sm font-medium leading-normal" href="#">Games</a>
              <a class="text-gray-300 hover:text-white text-sm font-medium leading-normal" href="#">Store</a>
              <a class="text-gray-300 hover:text-white text-sm font-medium leading-normal" href="#">Friends</a>
            </div>
            <div class="flex items-center gap-4">
              <!-- Dark/Light Mode Toggle -->
              <div class="toggle-switch active" id="theme-toggle">
                <div class="toggle-knob">
                  <span class="toggle-icon light-icon material-symbols-outlined">light_mode</span>
                  <span class="toggle-icon dark-icon material-symbols-outlined">dark_mode</span>
                </div>
              </div>

              <!-- Notification Button with Dropdown -->
              <div class="relative-container">
                <button id="notification-btn"
                  class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-10 bg-white-20 hover:bg-white-30 text-white gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-2.5 relative">
                  <span class="material-symbols-outlined text-white" data-icon="Bell">notifications</span>
                  <!-- Notification badge (hidden when no notifications) -->
                  <div id="notification-badge" class="notification-badge hidden">0</div>
                </button>

                <!-- Notification Dropdown -->
                <div id="notification-dropdown" class="notification-dropdown">
                  <div class="notification-header">
                    <h3 class="text-lg font-bold text-white">Notifications</h3>
                    <button id="mark-all-read" class="text-sm text-blue-400 hover:text-blue-300">Mark all as
                      read</button>
                  </div>
                  <div class="notification-content">
                    <!-- Empty state when no notifications -->
                    <div id="notification-empty" class="notification-empty">
                      <span class="material-symbols-outlined text-4xl mb-2 opacity-50">notifications_off</span>
                      <p class="text-gray-400">No notifications</p>
                      <p class="text-sm text-gray-500 mt-1">We'll notify you when something arrives</p>
                    </div>

                    <!-- Notification items (hidden by default) -->
                    <div id="notification-items" class="hidden">
                      <!-- Sample notification items would go here -->
                    </div>
                  </div>
                  <div class="notification-actions">
                    <a href="notifications.html" class="text-sm text-blue-400 hover:text-blue-300">View all
                      notifications</a>
                  </div>
                </div>
              </div>

              <!-- Profile Dropdown -->
              <div class="relative-container">
                <div id="user-avatar"
                  class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10 cursor-pointer hover:ring-2 hover:ring-blue-400 transition-all"
                  data-alt="User avatar"
                  style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuDvHNU_e5x-CyuSaQIOS8JNy4BWffnSXWUoJK9Kp54Vw4ebQaR_f2JNiShxoPAiE0XSzZNo2-9I4gT1vXvdFR91WrW3EcC3Jj_9lHHInR-AW4fZY9GdJA9L0nbYPSrbgcJZOmG-4VeuusZ2csQheQjAxTkXOw9fH9tONu2RunltdzmzQX-WVm-xoAaiiHnPRMGwx8uu1LOAEYAeQfq-ZF4ZtnWzx1_95gv9NdThhXrlS8b7ZQL4EytvLoP0qGOJOx2NnwR5ny401w");'>
                </div>

                <!-- Profile Dropdown Menu -->
                <div id="profile-dropdown" class="profile-dropdown">
                  <div class="profile-header">
                    <div class="profile-avatar">
                      <span>NK</span>
                    </div>
                    <div class="profile-info">
                      <div class="profile-name">Nuran Karimbayli</div>
                      <div class="profile-username">@Nuuran63</div>
                    </div>
                  </div>

                  <div class="py-2">
                    <a href="profile.html" class="profile-dropdown-item">
                      <span class="material-symbols-outlined text-lg">person</span>
                      <span>Profile</span>
                    </a>
                    <a href="settings.html" class="profile-dropdown-item">
                      <span class="material-symbols-outlined text-lg">settings</span>
                      <span>Settings</span>
                    </a>
                    <div class="profile-dropdown-divider"></div>
                    <a href="auth.html" class="profile-dropdown-item logout">
                      <span class="material-symbols-outlined text-lg">logout</span>
                      <span>Log Out</span>
                    </a>
                  </div>
                </div>
              </div>

              <button
                class="md:hidden flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-10 bg-white-20 hover:bg-white-30 text-white gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-2.5">
                <span class="material-symbols-outlined">menu</span>
              </button>
            </div>
          </header>

          <main class="mt-8 space-y-8">
            <!-- Core Profile Section -->
            <section class="bg-white-10 backdrop-blur-md rounded-xl p-6 @container relative">
              <div class="flex flex-col gap-6 @[520px]:flex-row @[520px]:justify-between">
                <div class="flex flex-col @[400px]:flex-row gap-6 items-center">
                  <div class="relative group">
                    <div id="profile-avatar"
                      class="bg-center bg-no-repeat aspect-square bg-cover rounded-full w-32 h-32 ring-4 ring-primary"
                      data-alt="Large user avatar"
                      style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuCBgz5iiEjOtIRgaMXLeR1-0YsFAX_2b304lKSYyAl4vb57s17h7QsHHjRbtYq8HBWYUTi_7oxPYT7ixHufcmNgImd2FG-7cDKkf7p5_5VXzWW2P-VWF-w5n7eMr1SzT6uC2-lU1MrpHUNUW0MsS_BY6DW4hMny6SIbwB_6UkbBstRSH561ukzjzkf9VgiRJ4pPN25GwpMKboHWn0Zii-Sg7etjE6KpV2lmSeZR1KV0_eSwfssEwoVoM4qFgoj8rD32t-qyXV2Igw");'>
                    </div>
                    <button id="edit-avatar-btn"
                      class="absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity">
                      <span class="material-symbols-outlined text-white text-4xl">edit</span>
                    </button>
                  </div>
                  <div class="flex flex-col justify-center text-center @[400px]:text-left">
                    <div class="username-container">
                      <input id="username-input"
                        class="text-e5e7eb text-2xl font-bold bg-transparent border-none focus:outline-none focus:ring-2 focus:ring-primary-50 rounded px-2 clickable-field"
                        value="Nuuran63" readonly>
                      <button id="edit-username-btn" class="edit-btn text-gray-400 hover:text-white"><span
                          class="material-symbols-outlined text-lg">edit</span></button>
                    </div>
                    <div class="name-container mt-1">
                      <input id="name-input"
                        class="text-gray-400 text-base bg-transparent border-none focus:outline-none focus:ring-2 focus:ring-primary-50 rounded px-2 clickable-field"
                        value="Nuran Karimbayli" readonly>
                      <button id="edit-name-btn" class="edit-btn text-gray-400 hover:text-white"><span
                          class="material-symbols-outlined text-lg">edit</span></button>
                    </div>
                    <!-- KISALTILMIŞ STATUS BÖLÜMÜ -->
                    <div class="mt-2 relative">
                      <div id="status-container" class="status-container">
                        <div class="w-3 h-3 rounded-full bg-green-500"></div>
                        <p class="text-gray-300 text-sm">Online</p>
                        <span class="material-symbols-outlined text-gray-400 text-lg">arrow_drop_down</span>
                      </div>
                      <!-- Status Selector Dropdown -->
                      <div id="status-dropdown" class="status-dropdown">
                        <div class="status-option" data-status="online">
                          <span class="material-symbols-outlined text-green-500 text-lg">circle</span>
                          <span>Online</span>
                        </div>
                        <div class="status-option" data-status="away">
                          <span class="material-symbols-outlined text-yellow-500 text-lg">trip_origin</span>
                          <span>Away</span>
                        </div>
                        <div class="status-option" data-status="dnd">
                          <span class="material-symbols-outlined text-red-500 text-lg">do_not_disturb_on</span>
                          <span>Do Not Disturb</span>
                        </div>
                        <div class="status-option" data-status="invisible">
                          <span class="material-symbols-outlined text-gray-500 text-lg">radio_button_unchecked</span>
                          <span>Invisible</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="mt-6 border-t border-white-10 pt-6">
                <div class="flex items-center gap-2 mb-2">
                  <h2 class="text-e5e7eb text-lg font-bold">About Me</h2>
                  <button id="edit-bio-btn" class="text-gray-400 hover:text-white"><span
                      class="material-symbols-outlined text-lg">edit</span></button>
                </div>
                <textarea id="bio-textarea"
                  class="bio-textarea w-full text-gray-300 text-base bg-transparent border-none focus:outline-none focus:ring-2 focus:ring-primary-50 rounded px-2 resize-none clickable-field"
                  rows="3" placeholder="Talk about yourself..." readonly></textarea>
              </div>
              <div class="mt-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                <!-- Birth Date Field -->
                <div
                  class="flex items-center gap-3 p-3 bg-white-5 rounded-lg clickable-field relative datepicker-container">
                  <span class="material-symbols-outlined text-primary">cake</span>
                  <div class="flex-1">
                    <p class="text-gray-400 text-sm">Birth Date</p>
                    <div id="birth-date-display" class="text-e5e7eb text-sm font-medium">Select birth date</div>
                  </div>
                  <span class="material-symbols-outlined text-gray-400">arrow_drop_down</span>

                  <!-- Date Picker -->
                  <div id="datepicker" class="datepicker">
                    <div class="datepicker-header">
                      <button class="prev">Prev</button>

                      <div>
                        <select class="month-input">
                          <option>January</option>
                          <option>February</option>
                          <option>March</option>
                          <option>April</option>
                          <option>May</option>
                          <option>June</option>
                          <option>July</option>
                          <option>August</option>
                          <option>September</option>
                          <option>October</option>
                          <option>November</option>
                          <option>December</option>
                        </select>
                        <input type="number" class="year-input" min="1900" max="2100" />
                      </div>

                      <button class="next">Next</button>
                    </div>

                    <div class="days">
                      <span>Sun</span>
                      <span>Mon</span>
                      <span>Tue</span>
                      <span>Wed</span>
                      <span>Thu</span>
                      <span>Fri</span>
                      <span>Sat</span>
                    </div>

                    <div class="dates"></div>

                    <div class="datepicker-footer">
                      <button class="cancel">Cancel</button>
                      <button class="apply">Apply</button>
                    </div>
                  </div>
                </div>

                <!-- Gender Field -->
                <div class="flex items-center gap-3 p-3 bg-white-5 rounded-lg clickable-field relative">
                  <span class="material-symbols-outlined text-primary">person</span>
                  <div class="flex-1">
                    <p class="text-gray-400 text-sm">Gender</p>
                    <div id="gender-display" class="gender-display text-e5e7eb text-sm font-medium">Select gender</div>
                  </div>
                  <span class="material-symbols-outlined text-gray-400">arrow_drop_down</span>

                  <!-- Gender Dropdown -->
                  <div id="gender-dropdown" class="custom-dropdown">
                    <div class="custom-dropdown-option" data-value="male">
                      <span class="material-symbols-outlined text-blue-500">male</span>
                      <span>Male</span>
                    </div>
                    <div class="custom-dropdown-option" data-value="female">
                      <span class="material-symbols-outlined text-pink-500">female</span>
                      <span>Female</span>
                    </div>
                  </div>
                </div>

                <!-- Location Field -->
                <div class="flex items-center gap-3 p-3 bg-white-5 rounded-lg clickable-field relative">
                  <span class="material-symbols-outlined text-primary">location_on</span>
                  <div class="flex-1">
                    <p class="text-gray-400 text-sm">Location</p>
                    <div id="location-display" class="country-display text-e5e7eb text-sm font-medium">Select location
                    </div>
                  </div>
                  <span class="material-symbols-outlined text-gray-400">arrow_drop_down</span>

                  <!-- Country Dropdown -->
                  <div id="country-dropdown" class="custom-dropdown">
                    <div class="p-3 border-b border-white-10">
                      <input type="text" id="country-search" class="w-full px-3 py-2 bg-white-5 rounded-lg text-e5e7eb"
                        placeholder="Search countries...">
                    </div>
                    <div id="country-list" class="max-h-60 overflow-y-auto">
                      <!-- Countries will be populated by JavaScript -->
                    </div>
                  </div>
                </div>
              </div>

              <!-- Save Changes Button - Moved to bottom right -->
              <div class="flex justify-end mt-6 pt-4 border-t border-white-10">
                <button id="save-changes-btn"
                  class="save-button flex min-w-[120px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-10 px-4 text-sm font-bold leading-normal tracking-[0.015em]"
                  disabled>
                  <span class="truncate">Save Changes</span>
                </button>
              </div>

              <div id="success-message"
                class="hidden mt-4 flex items-center justify-center p-3 bg-green-500/20 border border-green-500/30 rounded-xl text-green-300 success-message">
                <span class="material-symbols-outlined mr-2">check_circle</span>
                Profile updated successfully!
              </div>
            </section>

            <!-- Friends & Social Section -->
            <section class="bg-white-10 backdrop-blur-md rounded-xl p-6">
              <div class="flex flex-col sm:flex-row justify-between items-center mb-6">
                <h2 class="text-e5e7eb text-lg font-bold">Friends (1)</h2>
                <div class="flex items-center gap-2 mt-4 sm:mt-0">
                  <label class="flex flex-col min-w-40 !h-10 max-w-64">
                    <div class="flex w-full flex-1 items-stretch rounded-xl h-full">
                      <div
                        class="text-gray-400 flex border-none bg-white-20 items-center justify-center pl-3 rounded-l-xl border-r-0">
                        <span class="material-symbols-outlined">search</span>
                      </div>
                      <input
                        class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-xl text-e5e7eb focus:outline-0 focus:ring-0 border-none bg-white-20 focus:border-none h-full placeholder:text-gray-400 px-4 rounded-l-none border-l-0 pl-2 text-sm"
                        placeholder="Find friends..." value="" />
                    </div>
                  </label>
                  <button id="add-friend-section-btn"
                    class="flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-10 px-4 bg-primary text-white text-sm font-bold">
                    <span class="truncate">Add Friend</span>
                  </button>
                </div>
              </div>
              <div class="space-y-4">
                <!-- Friend Item 1 -->
                <div class="flex items-center p-3 bg-white-5 rounded-lg hover:bg-white-10 transition-colors group">
                  <div class="relative">
                    <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full w-12 h-12"
                      data-alt="Friend avatar"
                      style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuDmHpi34gZYRij-N8wpMhHsfahVU2Pe9jm_61ebCsew-ScG3ZSbyQxwDRxBSWVdu_Y9p60NORRzeUkgasZc7zQZAjPEEhMoLfFpG5l139ttu4ZmDSF5hYJYEuMQPH_-4jcZVfIiekAThdj99_vy6efhxl49mnqKYTwhJmLNJOfCuqOqWq7rVJrQCLes5Vgm7ZZC-8KVrq9UPTpI--BdhsgoHZ8E1lMjn7PqNyqRgPwv5KsKjF7i0ZdTblSRueZ_jq-AyNtTwwslLQ");'>
                    </div>
                    <div class="absolute bottom-0 right-0 w-4 h-4 rounded-full bg-green-500 border-2 border-[#1a1e38]">
                    </div>
                  </div>
                  <div class="ml-4 flex-grow">
                    <p class="text-e5e7eb font-semibold">GamerX</p>
                    <p class="text-sm text-primary">Playing: Cyberpunk 2077</p>
                  </div>
                  <div class="flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity">
                    <button class="p-2 rounded-full bg-white-20 hover:bg-primary text-white"><span
                        class="material-symbols-outlined text-lg">chat</span></button>
                    <button class="p-2 rounded-full bg-white-20 hover:bg-primary text-white"><span
                        class="material-symbols-outlined text-lg">person</span></button>
                    <button class="p-2 rounded-full bg-white-20 hover:bg-red-500 text-white"><span
                        class="material-symbols-outlined text-lg">person_remove</span></button>
                  </div>
                </div>
              </div>
            </section>
          </main>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="text-center py-8 px-10 border-t border-gray-200 mt-10 footer">
      <p class="text-sm text-gray-500">Nuran Karimbayli 2025 Open Source Project</p>
      <!-- Social media links -->
      <div class="flex justify-center gap-4 mt-4">
        <a href="https://www.linkedin.com/in/nurankarimbayli/" target="_blank"
          class="flex items-center justify-center w-10 h-10 rounded-full bg-gray-200 text-gray-700 hover:bg-blue-500 hover:text-white transition-colors">
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
            <path
              d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z" />
          </svg>
        </a>
        <a href="https://github.com/NuranKarimbayli" target="_blank"
          class="flex items-center justify-center w-10 h-10 rounded-full bg-gray-200 text-gray-700 hover:bg-gray-800 hover:text-white transition-colors">
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
            <path
              d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
          </svg>
        </a>
      </div>
    </footer>
  </div>

  <!-- Avatar Selection Modal -->
  <div class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4"
    id="avatar-modal">
    <div class="dark-modal border rounded-xl p-6 max-w-md w-full shadow-2xl">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-xl font-bold">Choose Avatar</h3>
        <button id="close-avatar-modal" class="text-gray-400 hover:text-white">
          <span class="material-symbols-outlined">close</span>
        </button>
      </div>
      <div class="mb-6">
        <h4 class="text-lg font-semibold mb-3">Stock Avatars</h4>
        <div class="grid grid-cols-4 gap-3">
          <div
            class="avatar-option bg-blue-500 rounded-full size-16 flex items-center justify-center cursor-pointer hover:ring-2 hover:ring-blue-300">
            <span class="material-symbols-outlined text-white">person</span>
          </div>
          <div
            class="avatar-option bg-purple-500 rounded-full size-16 flex items-center justify-center cursor-pointer hover:ring-2 hover:ring-purple-300">
            <span class="material-symbols-outlined text-white">pets</span>
          </div>
          <div
            class="avatar-option bg-green-500 rounded-full size-16 flex items-center justify-center cursor-pointer hover:ring-2 hover:ring-green-300">
            <span class="material-symbols-outlined text-white">smart_toy</span>
          </div>
          <div
            class="avatar-option bg-yellow-500 rounded-full size-16 flex items-center justify-center cursor-pointer hover:ring-2 hover:ring-yellow-300">
            <span class="material-symbols-outlined text-white">sports_esports</span>
          </div>
        </div>
      </div>
      <div>
        <h4 class="text-lg font-semibold mb-3">Upload Custom Avatar</h4>
        <div class="border-2 border-dashed border-gray-400 rounded-xl p-6 text-center">
          <input type="file" id="avatar-upload" class="hidden" accept="image/*">
          <label for="avatar-upload" class="cursor-pointer flex flex-col items-center">
            <span class="material-symbols-outlined text-4xl mb-2 text-gray-400">cloud_upload</span>
            <p class="text-gray-400">Click to upload an image</p>
            <p class="text-xs text-gray-500 mt-1">PNG, JPG, GIF up to 5MB</p>
          </label>
        </div>
      </div>
    </div>
  </div>

  <!-- Add Friend Modal -->
  <div class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4"
    id="add-friend-modal">
    <div class="dark-modal border rounded-xl p-6 max-w-md w-full shadow-2xl">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-xl font-bold">Add Friend</h3>
        <button id="close-add-friend-modal" class="text-gray-400 hover:text-white">
          <span class="material-symbols-outlined">close</span>
        </button>
      </div>
      <div class="mb-6">
        <p class="text-gray-300 mb-4">Search for users by username to add them as friends.</p>
        <div class="flex gap-2">
          <input type="text" id="friend-search-input"
            class="flex-1 form-input rounded-xl border border-gray-600 bg-gray-700 text-white px-4 py-2"
            placeholder="Enter username">
          <button id="search-friend-btn"
            class="flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-10 px-4 bg-primary text-white text-sm font-bold">
            <span class="truncate">Search</span>
          </button>
        </div>
      </div>
      <div id="search-results" class="hidden">
        <h4 class="text-lg font-semibold mb-3">Search Results</h4>
        <div class="space-y-3">
          <!-- Search results would appear here -->
        </div>
      </div>
      <div id="no-results" class="hidden text-center py-4">
        <span class="material-symbols-outlined text-4xl mb-2 opacity-50">search_off</span>
        <p class="text-gray-400">No users found</p>
        <p class="text-sm text-gray-500 mt-1">Try searching with a different username</p>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Dropdown yönetimi için global değişken
      let activeDropdown = null;
      let hasChanges = false;
      let originalValues = {};

      // Dropdown'ları kapatma fonksiyonu
      function closeAllDropdowns() {
        const dropdowns = [
          'status-dropdown',
          'datepicker',
          'gender-dropdown',
          'country-dropdown',
          'notification-dropdown',
          'profile-dropdown'
        ];

        dropdowns.forEach(id => {
          const dropdown = document.getElementById(id);
          if (dropdown) {
            dropdown.classList.remove('active');
          }
        });

        activeDropdown = null;
      }

      // Update save button state
      function updateSaveButton() {
        const saveButton = document.getElementById('save-changes-btn');
        if (!saveButton) return;

        const currentValues = {
          username: document.getElementById('username-input').value,
          name: document.getElementById('name-input').value,
          bio: document.getElementById('bio-textarea').value,
          birthDate: document.getElementById('birth-date-display').textContent,
          gender: document.getElementById('gender-display').textContent,
          location: document.getElementById('location-display').textContent,
          status: document.querySelector('#status-container .text-gray-300').textContent,
          avatar: document.getElementById('profile-avatar').style.backgroundImage
        };

        hasChanges = JSON.stringify(originalValues) !== JSON.stringify(currentValues);

        console.log('Original:', originalValues);
        console.log('Current:', currentValues);
        console.log('Has changes:', hasChanges);

        if (hasChanges) {
          saveButton.disabled = false;
          saveButton.classList.add('active');
          console.log('Save button activated - Changes detected');
        } else {
          saveButton.disabled = true;
          saveButton.classList.remove('active', 'changed');
          console.log('Save button disabled - No changes');
        }
      }

      // Initialize original values
      function initializeOriginalValues() {
        originalValues.username = document.getElementById('username-input').value;
        originalValues.name = document.getElementById('name-input').value;
        originalValues.bio = document.getElementById('bio-textarea').value;
        originalValues.birthDate = document.getElementById('birth-date-display').textContent;
        originalValues.gender = document.getElementById('gender-display').textContent;
        originalValues.location = document.getElementById('location-display').textContent;
        originalValues.status = document.querySelector('#status-container .text-gray-300').textContent;
        originalValues.avatar = document.getElementById('profile-avatar').style.backgroundImage;

        updateSaveButton();
      }

      // Update header avatar when profile avatar changes
      function updateHeaderAvatar() {
        const profileAvatar = document.getElementById('profile-avatar');
        const headerAvatar = document.getElementById('user-avatar');
        const profileDropdownAvatar = document.querySelector('.profile-avatar');

        if (profileAvatar && headerAvatar) {
          // Copy background image from profile avatar to header avatar
          headerAvatar.style.backgroundImage = profileAvatar.style.backgroundImage;

          // If avatar is a stock avatar (has background color), clear the background image
          if (profileAvatar.style.backgroundColor) {
            headerAvatar.style.backgroundImage = 'none';
            headerAvatar.style.backgroundColor = profileAvatar.style.backgroundColor;
          }
        }

        // Update profile dropdown avatar if it exists
        if (profileDropdownAvatar && profileAvatar.style.backgroundColor) {
          // For stock avatars, update the profile dropdown avatar too
          const icon = profileAvatar.querySelector('.material-symbols-outlined');
          if (icon) {
            profileDropdownAvatar.innerHTML = icon.textContent;
            profileDropdownAvatar.style.background = profileAvatar.style.backgroundColor;
          }
        }
      }

      // Bio textarea için text selection modu
      const bioTextarea = document.getElementById('bio-textarea');
      if (bioTextarea) {
        bioTextarea.addEventListener('click', function () {
          if (this.readOnly) {
            this.readOnly = false;
            this.focus();
            this.classList.add('selection-mode');
          }
        });

        bioTextarea.addEventListener('input', function () {
          if (this.value.trim() !== '') {
            this.classList.remove('placeholder-shown');
          } else {
            this.classList.add('placeholder-shown');
          }

          // Her karakter yazıldığında text selection modunda kal
          this.classList.add('selection-mode');
          updateSaveButton();
        });

        bioTextarea.addEventListener('blur', function () {
          this.readOnly = true;
          this.classList.remove('selection-mode');
        });
      }

      // Status dropdown functionality
      const statusContainer = document.getElementById('status-container');
      const statusDropdown = document.getElementById('status-dropdown');
      const statusOptions = document.querySelectorAll('.status-option');
      const statusIndicator = document.querySelector('#status-container .w-3');
      const statusText = document.querySelector('#status-container .text-gray-300');

      if (statusContainer && statusDropdown) {
        statusContainer.addEventListener('click', (e) => {
          e.stopPropagation();

          if (activeDropdown === statusDropdown) {
            closeAllDropdowns();
          } else {
            closeAllDropdowns();
            statusDropdown.classList.add('active');
            activeDropdown = statusDropdown;
          }
          console.log('Status container clicked');
        });

        // Status option selection
        statusOptions.forEach(option => {
          option.addEventListener('click', () => {
            const status = option.getAttribute('data-status');
            const statusIcon = option.querySelector('.material-symbols-outlined').textContent;
            const statusColor = window.getComputedStyle(option.querySelector('.material-symbols-outlined')).color;
            const statusLabel = option.querySelector('span:last-child').textContent;

            // Update status indicator
            statusIndicator.style.backgroundColor = statusColor;

            // Update status text
            statusText.textContent = statusLabel;

            // Close dropdown
            closeAllDropdowns();

            // Mark changes
            updateSaveButton();

            console.log('Status changed to:', statusLabel);
          });
        });
      }

      // Date Picker Functionality
      const birthDateField = document.querySelector('.datepicker-container');
      const datepicker = document.getElementById('datepicker');
      const yearInput = datepicker.querySelector('.year-input');
      const monthInput = datepicker.querySelector('.month-input');
      const cancelBtn = datepicker.querySelector('.cancel');
      const applyBtn = datepicker.querySelector('.apply');
      const nextBtn = datepicker.querySelector('.next');
      const prevBtn = datepicker.querySelector('.prev');
      const dates = datepicker.querySelector('.dates');
      const birthDateDisplay = document.getElementById('birth-date-display');

      let selectedDate = new Date();
      let year = selectedDate.getFullYear();
      let month = selectedDate.getMonth();

      // show datepicker
      if (birthDateField && datepicker) {
        birthDateField.addEventListener('click', (e) => {
          e.stopPropagation();

          if (activeDropdown === datepicker) {
            closeAllDropdowns();
          } else {
            closeAllDropdowns();
            datepicker.classList.add('active');
            activeDropdown = datepicker;
          }
        });
      }

      // hide datepicker
      if (cancelBtn) {
        cancelBtn.addEventListener('click', () => {
          datepicker.classList.remove('active');
          activeDropdown = null;
        });
      }

      // handle apply button click event
      if (applyBtn) {
        applyBtn.addEventListener('click', () => {
          // set the selected date to date input
          birthDateDisplay.textContent = selectedDate.toLocaleDateString("en-US", {
            year: "numeric",
            month: "2-digit",
            day: "2-digit",
          });

          // hide datepicker
          datepicker.classList.remove('active');
          activeDropdown = null;

          // Mark changes
          updateSaveButton();
        });
      }

      // handle next month nav
      if (nextBtn) {
        nextBtn.addEventListener('click', () => {
          if (month === 11) year++;
          month = (month + 1) % 12;
          displayDates();
        });
      }

      // handle prev month nav
      if (prevBtn) {
        prevBtn.addEventListener('click', () => {
          if (month === 0) year--;
          month = (month - 1 + 12) % 12;
          displayDates();
        });
      }

      // handle month input change event
      if (monthInput) {
        monthInput.addEventListener('change', () => {
          month = monthInput.selectedIndex;
          displayDates();
        });
      }

      // handle year input change event
      if (yearInput) {
        yearInput.addEventListener('change', () => {
          const newYear = parseInt(yearInput.value, 10) || new Date().getFullYear();
          year = Math.min(2100, Math.max(1900, newYear));
          yearInput.value = year;
          displayDates();
        });
      }

      const updateYearMonth = () => {
        if (monthInput) monthInput.selectedIndex = month;
        if (yearInput) yearInput.value = year;
      };

      const handleDateClick = (e) => {
        e.stopPropagation();
        const button = e.target;

        // remove the 'selected' class from other buttons
        const selected = dates.querySelector(".selected");
        selected && selected.classList.remove("selected");

        // add the 'selected' class to current button
        button.classList.add("selected");

        // set the selected date
        selectedDate = new Date(year, month, parseInt(button.textContent));
      };

      // render the dates in the calendar interface
      const displayDates = () => {
        // update year & month whenever the dates are updated
        updateYearMonth();

        // clear the dates
        if (dates) dates.innerHTML = "";

        //* display the last week of previous month

        // get the last date of previous month
        const lastOfPrevMonth = new Date(year, month, 0);

        for (let i = 0; i <= lastOfPrevMonth.getDay(); i++) {
          // if the last day is Saturday don't show the leading dates
          if (lastOfPrevMonth.getDay() === 6) break;

          const text = lastOfPrevMonth.getDate() - lastOfPrevMonth.getDay() + i;
          const button = createButton(text, true);
          if (dates) dates.appendChild(button);
        }

        //* display the current month

        // get the last date of the month
        const lastOfMonth = new Date(year, month + 1, 0);

        for (let i = 1; i <= lastOfMonth.getDate(); i++) {
          const button = createButton(i, false);
          button.addEventListener('click', handleDateClick);
          if (dates) dates.appendChild(button);
        }

        //* display the first week of next month

        const firstOfNextMonth = new Date(year, month + 1, 1);

        for (let i = firstOfNextMonth.getDay(); i < 7; i++) {
          // if the first day starts on Sunday don't show the trailing dates
          if (firstOfNextMonth.getDay() === 0) break;

          const text = firstOfNextMonth.getDate() - firstOfNextMonth.getDay() + i;
          const button = createButton(text, true);
          if (dates) dates.appendChild(button);
        }
      };

      const createButton = (text, isDisabled = false) => {
        const button = document.createElement('button');
        button.textContent = text;
        button.disabled = isDisabled;
        if (!isDisabled) {
          const buttonDate = new Date(year, month, text).toDateString();
          const today = buttonDate === new Date().toDateString();
          const selected = buttonDate === selectedDate.toDateString();

          button.classList.toggle('today', today);
          button.classList.toggle('selected', selected);
        }
        return button;
      };

      // Initialize date picker
      if (datepicker) {
        // Set current month and year
        if (monthInput) monthInput.selectedIndex = month;
        if (yearInput) yearInput.value = year;

        displayDates();
      }

      if (datepicker) {
        datepicker.addEventListener('click', function (e) {
          e.stopPropagation();
        });
      }

      // Gender Dropdown Functionality
      const genderField = document.querySelector('.clickable-field:has(#gender-display)');
      const genderDropdown = document.getElementById('gender-dropdown');
      const genderOptions = document.querySelectorAll('#gender-dropdown .custom-dropdown-option');
      const genderDisplay = document.getElementById('gender-display');

      if (genderField && genderDropdown) {
        genderField.addEventListener('click', (e) => {
          e.stopPropagation();

          if (activeDropdown === genderDropdown) {
            closeAllDropdowns();
          } else {
            closeAllDropdowns();
            genderDropdown.classList.add('active');
            activeDropdown = genderDropdown;
          }
          console.log('Gender field clicked');
        });

        genderOptions.forEach(option => {
          option.addEventListener('click', function () {
            const value = this.getAttribute('data-value');
            const text = this.querySelector('span:last-child').textContent;
            const icon = this.querySelector('.material-symbols-outlined').textContent;

            // Update display
            genderDisplay.innerHTML = `<span class="material-symbols-outlined ${value === 'male' ? 'text-blue-500' : 'text-pink-500'}">${icon}</span><span>${text}</span>`;

            // Close dropdown
            closeAllDropdowns();

            // Mark changes
            updateSaveButton();
            console.log('Gender changed to:', text);
          });
        });
      }

      // Country Dropdown Functionality
      const locationField = document.querySelector('.clickable-field:has(#location-display)');
      const countryDropdown = document.getElementById('country-dropdown');
      const countryList = document.getElementById('country-list');
      const countrySearch = document.getElementById('country-search');
      const locationDisplay = document.getElementById('location-display');

      let countries = [];

      // Fetch countries from REST Countries API
      async function fetchCountries() {
        try {
          const response = await fetch('https://restcountries.com/v3.1/all?fields=name,flags');
          countries = await response.json();

          // Ülkeleri alfabetik olarak sırala
          countries.sort((a, b) => a.name.common.localeCompare(b.name.common));

          displayCountries(countries);
        } catch (error) {
          console.error('Error fetching countries:', error);
          // Fallback to a few example countries
          countries = [
            { name: { common: 'United States' }, flags: { png: 'https://flagcdn.com/w320/us.png' } },
            { name: { common: 'United Kingdom' }, flags: { png: 'https://flagcdn.com/w320/gb.png' } },
            { name: { common: 'Canada' }, flags: { png: 'https://flagcdn.com/w320/ca.png' } },
            { name: { common: 'Germany' }, flags: { png: 'https://flagcdn.com/w320/de.png' } },
            { name: { common: 'France' }, flags: { png: 'https://flagcdn.com/w320/fr.png' } },
            { name: { common: 'Japan' }, flags: { png: 'https://flagcdn.com/w320/jp.png' } },
            { name: { common: 'Australia' }, flags: { png: 'https://flagcdn.com/w320/au.png' } },
            { name: { common: 'Brazil' }, flags: { png: 'https://flagcdn.com/w320/br.png' } },
          ];

          // Ülkeleri alfabetik olarak sırala
          countries.sort((a, b) => a.name.common.localeCompare(b.name.common));

          displayCountries(countries);
        }
      }

      // Display countries in the dropdown
      function displayCountries(countryArray) {
        if (!countryList) return;

        countryList.innerHTML = '';

        countryArray.forEach(country => {
          const countryOption = document.createElement('div');
          countryOption.className = 'custom-dropdown-option';
          countryOption.innerHTML = `
            <img src="${country.flags.png}" alt="${country.name.common} flag" class="country-flag">
            <span>${country.name.common}</span>
          `;

          countryOption.addEventListener('click', function (e) {
            e.stopPropagation(); // Event-in yayılmasını dayandır

            locationDisplay.innerHTML = `
    <img src="${country.flags.png}" alt="${country.name.common} flag" class="country-flag">
    <span>${country.name.common}</span>
  `;

            // DROPDOWN-U BİRBAŞA BAĞLA
            countryDropdown.classList.remove('active');
            activeDropdown = null;

            // Dəyişiklikləri qeyd et
            updateSaveButton();
          });

          countryList.appendChild(countryOption);
        });
      }

      // Initialize country dropdown
      if (locationField && countryDropdown) {
        fetchCountries();

        locationField.addEventListener('click', (e) => {
          e.stopPropagation();

          if (activeDropdown === countryDropdown) {
            closeAllDropdowns();
          } else {
            closeAllDropdowns();
            countryDropdown.classList.add('active');
            activeDropdown = countryDropdown;

            // Focus search input when dropdown opens
            setTimeout(() => {
              if (countrySearch) countrySearch.focus();
            }, 100);
          }
        });

        // Search countries
        if (countrySearch) {
          // Input event - axtarışı həyata keçir
          countrySearch.addEventListener('input', (e) => {
            e.stopPropagation();
            const searchTerm = e.target.value.toLowerCase();
            const filteredCountries = countries.filter(country =>
              country.name.common.toLowerCase().includes(searchTerm)
            );
            displayCountries(filteredCountries);
          });

          // Click event - dropdown-un bağlanmasının qarşısını al
          countrySearch.addEventListener('click', function (e) {
            e.stopPropagation();
          });

          // Mousedown event - focus zamanı bağlanmanın qarşısını al
          countrySearch.addEventListener('mousedown', function (e) {
            e.stopPropagation();
          });

          // Focus event - input focus olanda bağlanmanın qarşısını al
          countrySearch.addEventListener('focus', function (e) {
            e.stopPropagation();
          });

          // Keydown event - klaviatura ilə idarə etmək
          countrySearch.addEventListener('keydown', function (e) {
            e.stopPropagation();
          });
        }
      }

      // Notification and Profile dropdown functionality
      const notificationBtn = document.getElementById('notification-btn');
      const notificationDropdown = document.getElementById('notification-dropdown');
      const userAvatar = document.getElementById('user-avatar');
      const profileDropdown = document.getElementById('profile-dropdown');

      // Toggle notification dropdown
      if (notificationBtn && notificationDropdown) {
        notificationBtn.addEventListener('click', (e) => {
          e.stopPropagation();

          if (activeDropdown === notificationDropdown) {
            closeAllDropdowns();
          } else {
            closeAllDropdowns();
            notificationDropdown.classList.add('active');
            activeDropdown = notificationDropdown;
          }
        });
      }

      // Toggle profile dropdown
      if (userAvatar && profileDropdown) {
        userAvatar.addEventListener('click', (e) => {
          e.stopPropagation();

          if (activeDropdown === profileDropdown) {
            closeAllDropdowns();
          } else {
            closeAllDropdowns();
            profileDropdown.classList.add('active');
            activeDropdown = profileDropdown;
          }
        });
      }

      // Close all dropdowns when clicking outside
      document.addEventListener('click', (e) => {
        // Check if click is outside any dropdown or dropdown trigger
        const isClickInsideDropdown =
          (statusDropdown && statusDropdown.contains(e.target)) ||
          (datepicker && datepicker.contains(e.target)) ||
          (genderDropdown && genderDropdown.contains(e.target)) ||
          (countryDropdown && countryDropdown.contains(e.target)) ||
          (statusContainer && statusContainer.contains(e.target)) ||
          (birthDateField && birthDateField.contains(e.target)) ||
          (genderField && genderField.contains(e.target)) ||
          (locationField && locationField.contains(e.target)) ||
          (notificationDropdown && notificationDropdown.contains(e.target)) ||
          (notificationBtn && notificationBtn.contains(e.target)) ||
          (profileDropdown && profileDropdown.contains(e.target)) ||
          (userAvatar && userAvatar.contains(e.target));

        if (!isClickInsideDropdown) {
          closeAllDropdowns();
        }
      });

      // Mark all notifications as read
      const markAllReadBtn = document.getElementById('mark-all-read');
      if (markAllReadBtn) {
        markAllReadBtn.addEventListener('click', () => {
          // In a real app, this would mark all notifications as read
          const notificationBadge = document.getElementById('notification-badge');
          if (notificationBadge) notificationBadge.classList.add('hidden');
          alert('All notifications marked as read');
        });
      }

      // Profile dropdown item click handlers
      const profileDropdownItems = document.querySelectorAll('.profile-dropdown-item');
      if (profileDropdownItems.length > 0) {
        profileDropdownItems.forEach(item => {
          item.addEventListener('click', () => {
            const itemText = item.querySelector('span:last-child').textContent;

            if (itemText === 'Profile') {
              // Already on profile page
              closeAllDropdowns();
            } else if (itemText === 'Settings') {
              window.location.href = 'settings.html';
            } else if (itemText === 'Log Out') {
              window.location.href = 'auth.html';
            }
          });
        });
      }

      // Edit butonlarını dinamik olarak konumlandır
      function positionEditButtons() {
        const usernameInput = document.getElementById('username-input');
        const nameInput = document.getElementById('name-input');
        const editUsernameBtn = document.getElementById('edit-username-btn');
        const editNameBtn = document.getElementById('edit-name-btn');

        if (usernameInput && editUsernameBtn) {
          // Username edit butonunu konumlandır
          const usernameWidth = usernameInput.scrollWidth;
          editUsernameBtn.style.left = `${usernameWidth + 8}px`;
        }

        if (nameInput && editNameBtn) {
          // Name edit butonunu konumlandır
          const nameWidth = nameInput.scrollWidth;
          editNameBtn.style.left = `${nameWidth + 8}px`;
        }
      }

      // Input değişikliklerinde edit butonlarını yeniden konumlandır
      const usernameInput = document.getElementById('username-input');
      const nameInput = document.getElementById('name-input');

      if (usernameInput) {
        usernameInput.addEventListener('input', function () {
          setTimeout(positionEditButtons, 10);
          updateSaveButton();
        });

        // Click to edit functionality
        usernameInput.addEventListener('click', function () {
          if (this.readOnly) {
            this.readOnly = false;
            this.focus();
            this.select();
          }
        });
      }

      if (nameInput) {
        nameInput.addEventListener('input', function () {
          setTimeout(positionEditButtons, 10);
          updateSaveButton();
        });

        // Click to edit functionality
        nameInput.addEventListener('click', function () {
          if (this.readOnly) {
            this.readOnly = false;
            this.focus();
            this.select();
          }
        });
      }

      // Sayfa yüklendiğinde ve pencere boyutu değiştiğinde konumlandır
      window.addEventListener('load', positionEditButtons);
      window.addEventListener('resize', positionEditButtons);

      // Tema değiştirme işlevselliği
      const themeToggle = document.getElementById('theme-toggle');
      const bodyElement = document.body;

      // Kullanıcının tercihini kontrol et
      const savedTheme = localStorage.getItem('theme') || 'dark';
      if (savedTheme === 'dark') {
        bodyElement.classList.add('dark');
        themeToggle.classList.add('active');
      } else {
        bodyElement.classList.remove('dark');
        bodyElement.classList.add('light');
        themeToggle.classList.remove('active');
      }

      // Tema değiştirme
      themeToggle.addEventListener('click', function () {
        if (bodyElement.classList.contains('dark')) {
          bodyElement.classList.remove('dark');
          bodyElement.classList.add('light');
          themeToggle.classList.remove('active');
          localStorage.setItem('theme', 'light');
        } else {
          bodyElement.classList.remove('light');
          bodyElement.classList.add('dark');
          themeToggle.classList.add('active');
          localStorage.setItem('theme', 'dark');
        }
      });

      // Edit username functionality
      const editUsernameBtn = document.getElementById('edit-username-btn');
      if (editUsernameBtn) {
        editUsernameBtn.addEventListener('click', function () {
          const usernameInput = document.getElementById('username-input');
          usernameInput.readOnly = false;
          usernameInput.focus();
          usernameInput.select();
        });
      }

      // Username input events
      if (usernameInput) {
        usernameInput.addEventListener('input', updateSaveButton);
        usernameInput.addEventListener('blur', function () {
          this.readOnly = true;
        });
      }

      // Edit name functionality
      const editNameBtn = document.getElementById('edit-name-btn');
      if (editNameBtn) {
        editNameBtn.addEventListener('click', function () {
          const nameInput = document.getElementById('name-input');
          nameInput.readOnly = false;
          nameInput.focus();
          nameInput.select();
        });
      }

      // Name input events
      if (nameInput) {
        nameInput.addEventListener('input', updateSaveButton);
        nameInput.addEventListener('blur', function () {
          this.readOnly = true;
        });
      }

      // Edit bio functionality
      const editBioBtn = document.getElementById('edit-bio-btn');
      if (editBioBtn) {
        editBioBtn.addEventListener('click', function () {
          const bioTextarea = document.getElementById('bio-textarea');
          bioTextarea.readOnly = false;
          bioTextarea.focus();
          bioTextarea.classList.add('selection-mode');
        });
      }

      // Bio textarea events
      if (bioTextarea) {
        bioTextarea.addEventListener('input', updateSaveButton);
        bioTextarea.addEventListener('blur', function () {
          this.readOnly = true;
          this.classList.remove('selection-mode');
        });
      }

      // Save changes functionality
      const saveChangesBtn = document.getElementById('save-changes-btn');
      if (saveChangesBtn) {
        saveChangesBtn.addEventListener('click', function () {
          if (hasChanges) {
            // Add pulse animation
            this.classList.add('changed');

            // In a real app, this would save the changes to the server
            const successMessage = document.getElementById('success-message');
            successMessage.classList.remove('hidden');

            // Update original values
            originalValues.username = document.getElementById('username-input').value;
            originalValues.name = document.getElementById('name-input').value;
            originalValues.bio = document.getElementById('bio-textarea').value;
            originalValues.birthDate = document.getElementById('birth-date-display').textContent;
            originalValues.gender = document.getElementById('gender-display').textContent;
            originalValues.location = document.getElementById('location-display').textContent;
            originalValues.avatar = document.getElementById('profile-avatar').style.backgroundImage;

            // Update save button state
            updateSaveButton();

            // Remove pulse animation after animation completes
            setTimeout(() => {
              this.classList.remove('changed');
            }, 500);

            // Hide success message after 3 seconds
            setTimeout(() => {
              successMessage.classList.add('hidden');
            }, 3000);
          }
        });
      }

      // Avatar modal functionality
      const avatarModal = document.getElementById('avatar-modal');
      const editAvatarBtn = document.getElementById('edit-avatar-btn');
      const profileAvatar = document.getElementById('profile-avatar');
      const closeAvatarModal = document.getElementById('close-avatar-modal');
      const avatarOptions = document.querySelectorAll('.avatar-option');
      const avatarUpload = document.getElementById('avatar-upload');

      // Open avatar modal
      if (editAvatarBtn) {
        editAvatarBtn.addEventListener('click', () => {
          avatarModal.classList.remove('hidden');
        });
      }

      // Close avatar modal
      if (closeAvatarModal) {
        closeAvatarModal.addEventListener('click', () => {
          avatarModal.classList.add('hidden');
        });
      }

      // Select stock avatar
      if (avatarOptions.length > 0) {
        avatarOptions.forEach(option => {
          option.addEventListener('click', () => {
            const icon = option.querySelector('.material-symbols-outlined').textContent;
            const bgColor = window.getComputedStyle(option).backgroundColor;

            // Update avatar
            profileAvatar.innerHTML = `<span class="material-symbols-outlined text-white flex items-center justify-center h-full text-4xl">${icon}</span>`;
            profileAvatar.style.backgroundColor = bgColor;
            profileAvatar.style.backgroundImage = 'none';

            // Update header avatar
            updateHeaderAvatar();

            avatarModal.classList.add('hidden');

            // Mark changes
            updateSaveButton();
          });
        });
      }

      // Upload custom avatar
      if (avatarUpload) {
        avatarUpload.addEventListener('change', function (e) {
          if (this.files && this.files[0]) {
            const reader = new FileReader();

            reader.onload = function (e) {
              profileAvatar.style.backgroundImage = `url(${e.target.result})`;
              profileAvatar.style.backgroundColor = '';
              profileAvatar.innerHTML = '';

              // Update header avatar
              updateHeaderAvatar();

              // Mark changes
              updateSaveButton();
            }

            reader.readAsDataURL(this.files[0]);
            avatarModal.classList.add('hidden');
          }
        });
      }

      // Add friend modal functionality
      const addFriendBtn = document.getElementById('add-friend-section-btn');
      const addFriendModal = document.getElementById('add-friend-modal');
      const closeAddFriendModal = document.getElementById('close-add-friend-modal');
      const searchFriendBtn = document.getElementById('search-friend-btn');
      const searchResults = document.getElementById('search-results');
      const noResults = document.getElementById('no-results');

      // Open add friend modal
      if (addFriendBtn && addFriendModal) {
        addFriendBtn.addEventListener('click', () => {
          addFriendModal.classList.remove('hidden');
        });
      }

      // Close add friend modal
      if (closeAddFriendModal && addFriendModal) {
        closeAddFriendModal.addEventListener('click', () => {
          addFriendModal.classList.add('hidden');
        });
      }

      // Search friend functionality
      if (searchFriendBtn && searchResults && noResults) {
        searchFriendBtn.addEventListener('click', () => {
          const searchInput = document.getElementById('friend-search-input').value;

          if (searchInput.trim() === '') {
            alert('Please enter a username to search');
            return;
          }

          // In a real app, this would search for users
          // For now, we'll just show no results
          searchResults.classList.add('hidden');
          noResults.classList.remove('hidden');
        });
      }

      // Başlangıç değerlerini ayarla
      initializeOriginalValues();

      // Sayfa yüklendiğinde edit butonlarını konumlandır
      setTimeout(positionEditButtons, 100);
    });

    // Hata yakalama
    window.addEventListener('error', function (e) {
      console.error('Error:', e.error);
    });
  </script>
</body>

</html>